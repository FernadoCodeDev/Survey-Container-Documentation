# **Survey Container** 
![SurveyContainer](https://github.com/FernadoCodeDev/Survey-Container-Documentation/blob/main/Readme/SurveyContainer.png)

# üì¶ Survey Container

**Survey Container** es una soluci√≥n completa desarrollada como parte de una prueba t√©cnica para construir un sistema de encuestas internas modular, reutilizable y escalable.

[![Dependencia-NPM](https://img.shields.io/static/v1?message=Dependencia-NPM&logo=npm&label=&color=CB3837&logoColor=white&labelColor=&style=for-the-badge)](https://www.npmjs.com/package/survey-container)

## Una forma sencilla de integrar survey container a tu proyecto

Desde la configuraci√≥n de tu base de datos hasta la integraci√≥n en tu frontend, estos pasos te guiar√°n en todo el proceso para comenzar a usar la dependencia survey container de forma eficiente y r√°pida.

### Instala la dependencia

Crea una base de datos y Aseg√∫rate de incluir las tablas requeridas:
**Survey, Question y Response**, siguiendo la estructura definida en la documentaci√≥n.

### Prepara el backend

Agrega los archivos para gestionar m√©tricas, encuestas y respuestas:
**metrics, questions, getResponse, postResponse, create, survey**

### Instala la dependencia

Desde la terminal ejecuta:

```
npm i survey-container
```

### Evita versiones antiguas

Las versiones anteriores pueden contener errores ya corregidos. Siempre revisa el package.json y actualiza si es necesario para evitar comportamientos inesperados.


### Integra en tu componente 

Importa el paquete seg√∫n tu framework Y usa el componente con los props necesarios (surveyId, fetchUrl, responseUrl, etc.).

### ¬°Listo para usar!

Una vez configurado todo, podr√°s mostrar encuestas, recolectar respuestas y analizar m√©tricas f√°cilmente.
Disfruta de una integraci√≥n limpia, extensible y flexible.


# Integraci√≥n en el Front-End y Back-end

<details>
<summary>üé® Integraci√≥n del lado del Front-End</summary>

<details>
<summary> Props del Front </summary>

| Prop               | Tipo                               | Obligatorio | Descripci√≥n                                                                                                                                                                                                                                                                           |
| ------------------ | ---------------------------------- | ----------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `surveyId`         | `string`                           | ‚úÖ S√≠        | Es el ID de la encuesta que quieres mostrar. En esta demo se obtiene desde la URL usando `useParams()`.                                                                                                                                                                               |
| `fetchUrl`         | `string`                           | ‚úÖ S√≠      | Es la URL base para hacer la solicitud **GET** y obtener los datos de la encuesta. Por ejemplo: `http://localhost:3000/api/surveys/survey.php?id=`. Se a√±adir√° autom√°ticamente el `surveyId` al final.                               |
| `responseUrl`      | `string`                           | ‚úÖ S√≠      | Es la URL donde se env√≠an las respuestas con una solicitud **POST**.                                                                                                                                          |
| `onAlert`          | `(message: string, type?: string)` | ‚ùå No        | Funci√≥n que se ejecuta para mostrar una alerta dependiendo del estado de la encuesta (error, √©xito, advertencia). Puedes personalizarla como quieras (modal, toast, etc.) |
| `apiUrl`           | `string`                           | ‚ùå No        | Si prefieres una URL base en lugar de `fetchUrl` o `responseUrl` individuales, puedes usar este prop como ra√≠z para los endpoints `/surveys` y `/responses`.                                                                                                   |
| `onSubmit`         | `(responses) => Promise<void>`     | ‚ùå No        | Si quieres manejar t√∫ mismo el env√≠o de respuestas, puedes pasar tu propia funci√≥n `onSubmit`. Si no se define, se har√° un POST autom√°ticamente a `responseUrl`.                                                                                                                      |
| `loadingText`      | `string`                           | ‚ùå No        | Texto que se muestra mientras la encuesta est√° cargando. Por defecto: `"Cargando encuesta..."`.                                                                                                                                                                                       |
| `submitButtonText` | `string`                           | ‚ùå No        | Texto del bot√≥n de env√≠o. Por defecto: `"Enviar respuestas"`.                                                                                                                                                                                                                         |
| `className`        | `string`                           | ‚ùå No        | Clase CSS personalizada para aplicar estilos adicionales al contenedor del widget.                                                                                                                                                                                                    |

</details>

<details>
<summary> Integraci√≥n con React </summary>

# Integraci√≥n con React

El componente **SurveyContainer** te permite integrar encuestas de manera sencilla dentro de tu aplicaci√≥n desarrollada con React. Con √©l, puedes mostrar formularios interactivos y personalizables sin necesidad de implementar toda la l√≥gica desde cero.

## Componente

Para utilizar el componente **SurveyWidget** de la dependencia **survey container**, primero debes importarlo en tu proyecto de React. Este componente es flexible, permitiendo usar rutas propias para obtener y guardar encuestas.

Adem√°s, puedes integrar librer√≠as de notificaciones como **react-toastify**, lo que facilita mostrar mensajes personalizados, por ejemplo:

- **Encuesta enviada con √©xito**
- **Ocurri√≥ un error al cargar la encuesta**

De esta forma, garantizas una mejor experiencia de usuario al manejar tanto confirmaciones como errores dentro de tu aplicaci√≥n.

```
import React from "react";
import { useParams } from "react-router-dom";
import { SurveyWidget } from "survey-container";

function SurveyContainer() {

    const { surveyId } = useParams();

    return (
        <div className="">
            <SurveyWidget
                surveyId={surveyId}
                fetchUrl="Route to access the survey"
                responseUrl="Path to save answers"
                onAlert="Function to display alerts. You can use react-toastify"
            />
        </div>
    );

}
export default SurveyContainer;
```


</details>

<details>
<summary> Integraci√≥n con Vue </summary>

# Integraci√≥n con Vue JS

El componente **Survey Container** te permite integrar encuestas de manera sencilla dentro de tu aplicaci√≥n desarrollada con Vue. Con √©l, puedes mostrar formularios interactivos y personalizables sin necesidad de implementar toda la l√≥gica desde cero.

## Componente

Para utilizar el componente **SurveyWidget** de la dependencia **survey container**, primero debes importarlo en tu proyecto de Vue. Este componente es flexible, permitiendo usar rutas propias para obtener y guardar encuestas.

Adem√°s, puedes integrar librer√≠as de notificaciones como **Vue Toastification**, lo que facilita mostrar mensajes personalizados, por ejemplo:

- **Encuesta enviada con √©xito**
- **Ocurri√≥ un error al cargar la encuesta**

De esta forma, garantizas una mejor experiencia de usuario al manejar tanto confirmaciones como errores dentro de tu aplicaci√≥n.

```
<template>
    <div class="">
        <SurveyWidget :surveyId="surveyId" fetchUrl="Route to access the survey"
            responseUrl="Path to save answers"
            onAlert="Funci√≥n para mostrar alertas. Puedes usar vue-toastification" />
    </div>
</template>

<script>
import { useRoute } from 'vue-router';
import { SurveyWidget } from 'survey-container';

export default {
    components: {
        SurveyWidget
    },
    setup() {
        const route = useRoute();
        const surveyId = route.params.surveyId;

        return {
            surveyId
        };
    }
};
</script>
```

</details>

<details>
<summary> Integraci√≥n con Angular </summary>

# Integraci√≥n con Angular

El componente **SurveyContainer** te permite integrar encuestas de manera sencilla dentro de tu aplicaci√≥n desarrollada con Angular. Con √©l, puedes mostrar formularios interactivos y personalizables sin necesidad de implementar toda la l√≥gica desde cero.

## Componente

Para utilizar el componente **SurveyWidget** de la dependencia **survey container**, primero debes importarlo en tu proyecto de Angular. Este componente es flexible, permitiendo usar rutas propias para obtener y guardar encuestas.

Adem√°s, puedes integrar librer√≠as de notificaciones como **ngx-toastr**, lo que facilita mostrar mensajes personalizados, por ejemplo:

- **Encuesta enviada con √©xito**
- **Ocurri√≥ un error al cargar la encuesta**

De esta forma, garantizas una mejor experiencia de usuario al manejar tanto confirmaciones como errores dentro de tu aplicaci√≥n.

```
import { Component } from "@angular/core";
import { ActivatedRoute } from "@angular/router";
import { SurveyWidget } from "survey-container";

@Component({
  selector: "app-survey-container",
  template: `
    <div class="">
      <survey-widget
        [surveyId]="surveyId"
        [fetchUrl]="'Route to access the survey'"
        [responseUrl]="'Path to save answers'"
        [onAlert]="showAlert"
      ></survey-widget>
    </div>
  `,
})
export class SurveyContainerComponent {
  surveyId: string;

  constructor(private route: ActivatedRoute) {
    this.surveyId = this.route.snapshot.paramMap.get("surveyId");
  }

  showAlert(message: string) {
    // Function to display alerts. You can use ngx-toastr
  }
}

```

</details>

</details>



<details>
<summary>‚öôÔ∏è Integraci√≥n del lado del Back-End</summary>

Para que el componente **Survey Container** funcione correctamente, es necesario configurar en el backend una serie de endpoints que gestionen encuestas, preguntas, m√©tricas y respuestas.

<details>
<summary> Tablas de la base de datos </summary>

Para ejecutar la dependencia se necesitara tener siertos campos en la base de datos, el script de creaci√≥n de base de datos, tablas y campos requeridos:
script de creaci√≥n de base de datos

```
CREATE TABLE IF NOT EXISTS Survey (
  id VARCHAR(36) PRIMARY KEY,
  qualification VARCHAR(255) NOT NULL
);

CREATE TABLE IF NOT EXISTS Question (
  id VARCHAR(36) PRIMARY KEY,
  text TEXT NOT NULL,
  surveyId VARCHAR(36),
  FOREIGN KEY (surveyId) REFERENCES Survey(id) ON DELETE CASCADE
);

CREATE TABLE IF NOT EXISTS Response (
  id VARCHAR(36) PRIMARY KEY,
  content TEXT NOT NULL,
  questionId VARCHAR(36),
  FOREIGN KEY (questionId) REFERENCES Question(id) ON DELETE CASCADE
);
```

[schema.sql](https://github.com/FernadoCodeDev/Survey-Container-Documentation/blob/main/Database/schema.sql)

</details>

<details>
<summary> Integraci√≥n con PHP </summary>

En el caso de usar **PHP**, la estructura b√°sica de archivos recomendada es la siguiente:

```
Carpeta/
‚îú‚îÄ‚îÄ metrics/    
‚îÇ   ‚îî‚îÄ‚îÄ metrics.php           // Obtiene todas las encuestas
‚îú‚îÄ‚îÄ questions/    
‚îÇ   ‚îî‚îÄ‚îÄ questions.php         // Obtiene las preguntas de una encuesta
‚îú‚îÄ‚îÄ response/    
‚îÇ   ‚îú‚îÄ‚îÄ getResponse.php       // Obtiene las respuestas
‚îÇ   ‚îî‚îÄ‚îÄ postResponse.php      // Guarda las respuestas
‚îú‚îÄ‚îÄ surveys/    
‚îÇ   ‚îú‚îÄ‚îÄ create.php            // Crea una nueva encuesta
‚îÇ   ‚îî‚îÄ‚îÄ survey.php            // Obtiene una encuesta por ID
```

## metrics

El archivo `metrics.php` expone un endpoint encargado de recuperar todas las encuestas disponibles.

Esto permite, por ejemplo, generar reportes o listados globales para su administraci√≥n.

[metrics.php](https://github.com/FernadoCodeDev/Survey-Container-Documentation/blob/main/Backend-Integration/PHP/metrics/metrics.php)

## questions

El archivo `questions.php` obtiene las preguntas asociadas a una encuesta espec√≠fica.

De esta manera, se asegura que cada encuesta cargue √∫nicamente las preguntas correspondientes a su configuraci√≥n.

[questions.php](https://github.com/FernadoCodeDev/Survey-Container-Documentation/blob/main/Backend-Integration/PHP/questions/questions.php)

## response

En la carpeta `response/` se encuentran dos archivos clave:

`getResponse.php` ‚Üí Devuelve las respuestas ya almacenadas de una encuesta.

`postResponse.php` ‚Üí Recibe y guarda las nuevas respuestas enviadas por los usuarios.

Estos endpoints permiten manejar tanto la consulta como el registro de informaci√≥n de manera organizada.

[getResponse.php](https://github.com/FernadoCodeDev/Survey-Container-Documentation/blob/main/Backend-Integration/PHP/response/getResponse.php)

[postResponse.php](https://github.com/FernadoCodeDev/Survey-Container-Documentation/blob/main/Backend-Integration/PHP/response/postResponse.php)

## surveys

Dentro de la carpeta `surveys/` se gestionan las encuestas propiamente dichas:

`create.php` ‚Üí Permite crear una nueva encuesta en el sistema.

`survey.php` ‚Üí Obtiene la informaci√≥n de una encuesta espec√≠fica a partir de su ID √∫nico.

[create.php](https://github.com/FernadoCodeDev/Survey-Container-Documentation/blob/main/Backend-Integration/PHP/surveys/create.php)

[survey.php](https://github.com/FernadoCodeDev/Survey-Container-Documentation/blob/main/Backend-Integration/PHP/surveys/survey.php)

</details>

<details>
<summary> Integraci√≥n con Node.JS </summary>

En el caso de usar **NodeJS**, la estructura b√°sica de archivos recomendada es la siguiente:

```
Carpeta/
‚îú‚îÄ‚îÄ metrics/    
‚îÇ   ‚îî‚îÄ‚îÄ metrics.js           // Obtiene todas las encuestas
‚îú‚îÄ‚îÄ questions/    
‚îÇ   ‚îî‚îÄ‚îÄ questions.js         // Obtiene las preguntas de una encuesta
‚îú‚îÄ‚îÄ response/    
‚îÇ   ‚îú‚îÄ‚îÄ getResponse.js       // Obtiene las respuestas
‚îÇ   ‚îî‚îÄ‚îÄ postResponse.js      // Guarda las respuestas
‚îú‚îÄ‚îÄ surveys/    
‚îÇ   ‚îú‚îÄ‚îÄ create.js            // Crea una nueva encuesta
‚îÇ   ‚îî‚îÄ‚îÄ survey.js            // Obtiene una encuesta por ID
```

## metrics

El archivo `metrics.js` expone un endpoint encargado de recuperar todas las encuestas disponibles.

Esto permite, por ejemplo, generar reportes o listados globales para su administraci√≥n.

[metrics.js](https://github.com/FernadoCodeDev/Survey-Container-Documentation/blob/main/Backend-Integration/NodeJS/metrics/metrics.js)

## questions

El archivo `questions.js` obtiene las preguntas asociadas a una encuesta espec√≠fica.

De esta manera, se asegura que cada encuesta cargue √∫nicamente las preguntas correspondientes a su configuraci√≥n.

[questions.js](https://github.com/FernadoCodeDev/Survey-Container-Documentation/blob/main/Backend-Integration/NodeJS/questions/questions.js)

## response

En la carpeta `response/` se encuentran dos archivos clave:

`getResponse.js` ‚Üí Devuelve las respuestas ya almacenadas de una encuesta.

`postResponse.js` ‚Üí Recibe y guarda las nuevas respuestas enviadas por los usuarios.

Estos endpoints permiten manejar tanto la consulta como el registro de informaci√≥n de manera organizada.

[getResponse.js](https://github.com/FernadoCodeDev/Survey-Container-Documentation/blob/main/Backend-Integration/NodeJS/response/getResponse.js)

[postResponse.js](https://github.com/FernadoCodeDev/Survey-Container-Documentation/blob/main/Backend-Integration/NodeJS/response/postResponse.js)

## surveys

Dentro de la carpeta `surveys/` se gestionan las encuestas propiamente dichas:

`create.js` ‚Üí Permite crear una nueva encuesta en el sistema.

`survey.js` ‚Üí Obtiene la informaci√≥n de una encuesta espec√≠fica a partir de su ID √∫nico.

[create.js](https://github.com/FernadoCodeDev/Survey-Container-Documentation/blob/main/Backend-Integration/NodeJS/surveys/create.js)

[survey.js](https://github.com/FernadoCodeDev/Survey-Container-Documentation/blob/main/Backend-Integration/NodeJS/surveys/survey.js)


</details>

</details>






















